(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{121:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return s})),r.d(t,"metadata",(function(){return i})),r.d(t,"rightToc",(function(){return c})),r.d(t,"default",(function(){return u}));var n=r(2),a=r(6),o=(r(0),r(130)),s={id:"mesh-transforms",title:"Mesh Transforms",sidebar_label:"4. Mesh Transforms"},i={unversionedId:"getting-started/mesh-transforms",id:"getting-started/mesh-transforms",isDocsHomePage:!1,title:"Mesh Transforms",description:"Introduction to Transforms",source:"@site/docs/getting-started/mesh-transforms.md",slug:"/getting-started/mesh-transforms",permalink:"/docs/getting-started/mesh-transforms",editUrl:"https://github.com/urigo/graphql-mesh/edit/master/website/docs/getting-started/mesh-transforms.md",version:"current",sidebar_label:"4. Mesh Transforms",sidebar:"sidebar",previous:{title:"Basic Usage",permalink:"/docs/getting-started/basic-example"},next:{title:"Extending Schema with Multiple APIs",permalink:"/docs/getting-started/multiple-apis"}},c=[{value:"Introduction to Transforms",id:"introduction-to-transforms",children:[]},{value:"Handler-level transforms",id:"handler-level-transforms",children:[]},{value:"Root-level transforms",id:"root-level-transforms",children:[]}],l={rightToc:c};function u(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"introduction-to-transforms"},"Introduction to Transforms"),Object(o.b)("p",null,"GraphQL Mesh allow you to do schema transformations easily, you can use one of the built-in transforms, or write your own."),Object(o.b)("p",null,"Each transformer can manipulate the schema the way it needs, and return the modified schema."),Object(o.b)("p",null,"Transforms are specified as a list of objects, and they are executed in order, and you can apply them over a specific input source, or over the unified schema (after merging all sources)."),Object(o.b)("h2",{id:"handler-level-transforms"},"Handler-level transforms"),Object(o.b)("p",null,"To specify ",Object(o.b)("inlineCode",{parentName:"p"},"transforms")," over a specific source, add it to your ",Object(o.b)("inlineCode",{parentName:"p"},"sources")," section under the source you wish to modify."),Object(o.b)("p",null,"The following example prefixes an input source to make it simpler later to merge and avoid conflicts:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yml"}),"sources:\n  - name: Wiki\n    handler:\n      openapi:\n        source: https://api.apis.guru/v2/specs/wikimedia.org/1.0.0/swagger.yaml\n    transforms:\n      - prefix:\n          value: Wiki_\n")),Object(o.b)("h2",{id:"root-level-transforms"},"Root-level transforms"),Object(o.b)("p",null,"To specify ",Object(o.b)("inlineCode",{parentName:"p"},"transforms")," over unified schema, you should put it in the root of your config file. This could be used in case you need access fields or types from all your data source, for example for linking two data sources together."),Object(o.b)("p",null,"The following example prefixes an input source to make it simpler later to merge and avoid conflicts:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yml"}),"sources:\n  - name: Users\n    handler: #...\n  - name: Posts\n    handler: #...\ntransforms:\n  - cache:\n      - field: Query.user\n        cacheKey: user-{args.id}\n        invalidates:\n          effectingOperations:\n            - operation: Mutation.updateUser\n              matchKey: {args.userIdToUpdate}\n")),Object(o.b)("p",null,"The example above uses ",Object(o.b)("inlineCode",{parentName:"p"},"cache")," transform on root and when someone uses ",Object(o.b)("inlineCode",{parentName:"p"},"updateUser")," with a specific user id, it will update the data record, and then invalidate the cache automatically."),Object(o.b)("p",null,"You can learn more about caching ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/transforms/cache"}),"in the dedicated docs.")))}u.isMDXComponent=!0},130:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return f}));var n=r(0),a=r.n(n);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=a.a.createContext({}),u=function(e){var t=a.a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i({},t,{},e)),r},p=function(e){var t=u(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=Object(n.forwardRef)((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=u(r),m=n,f=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return r?a.a.createElement(f,i({ref:t},l,{components:r})):a.a.createElement(f,i({ref:t},l))}));function f(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,s=new Array(o);s[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var l=2;l<o;l++)s[l]=r[l];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,r)}m.displayName="MDXCreateElement"}}]);