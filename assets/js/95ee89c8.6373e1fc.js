"use strict";(self.webpackChunk_graphql_mesh_website=self.webpackChunk_graphql_mesh_website||[]).push([[3618],{5318:function(e,t,r){r.d(t,{Zo:function(){return d},kt:function(){return f}});var n=r(7378);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},d=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(r),f=o,m=u["".concat(s,".").concat(f)]||u[f]||p[f]||a;return r?n.createElement(m,i(i({ref:t},d),{},{components:r})):n.createElement(m,i({ref:t},d))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},5391:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return l},metadata:function(){return s},toc:function(){return c},default:function(){return p}});var n=r(9603),o=r(120),a=(r(7378),r(5318)),i=["components"],l={id:"federation",title:"Apollo Federation Transform",sidebar_label:"Apollo Federation"},s={unversionedId:"transforms/federation",id:"transforms/federation",isDocsHomePage:!1,title:"Apollo Federation Transform",description:"federation transform allows to add the resolvers and directives to conform to the federation specification. Much of the federation sourcecode could be reused ensuring it is compliant to the specification. This transform uses graphql-transform-federation package.",source:"@site/docs/transforms/federation.md",sourceDirName:"transforms",slug:"/transforms/federation",permalink:"/docs/transforms/federation",editUrl:"https://github.com/urigo/graphql-mesh/edit/master/website/docs/transforms/federation.md",version:"current",sidebar_label:"Apollo Federation",frontMatter:{id:"federation",title:"Apollo Federation Transform",sidebar_label:"Apollo Federation"},sidebar:"sidebar",previous:{title:"Type Merging Transform",permalink:"/docs/transforms/type-merging"},next:{title:"Extend Transform (experimental)",permalink:"/docs/transforms/extend"}},c=[{value:"How to use?",id:"how-to-use",children:[{value:"Add Reference Resolver as a Code File",id:"add-reference-resolver-as-a-code-file",children:[]}]}],d={toc:c};function p(e){var t=e.components,r=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"federation")," transform allows to add the resolvers and directives to conform to the federation specification. Much of the federation sourcecode could be reused ensuring it is compliant to the specification. This transform uses ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/0xR/graphql-transform-federation"},(0,a.kt)("inlineCode",{parentName:"a"},"graphql-transform-federation"))," package."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"yarn add @graphql-mesh/transform-federation\n")),(0,a.kt)("h2",{id:"how-to-use"},"How to use?"),(0,a.kt)("p",null,"Add the following configuration to your Mesh config file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},'transforms:\n  - federation: \n        types:\n            # Ensure the root queries of this schema show up the combined schema\n            - name: Query\n              config:\n                extend: true\n            - name: Product\n              config:\n                # extend Product {\n                extend: true\n                # Product @key(fields: "id") {\n                keyFields:\n                    - id\n                fields:\n                    # id: Int! @external\n                    - name: id\n                      external: true\n                resolveReference:\n                  queryFieldName: user\n\n')),(0,a.kt)("h3",{id:"add-reference-resolver-as-a-code-file"},"Add Reference Resolver as a Code File"),(0,a.kt)("p",null,"If you want to add more complex business logic, you can point to a code file that exports a resolver function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"resolveReference: ./userResolveReference.js\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"./userResolveReference.js")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// So we can point to an existing query field to resolve that entity\nmodule.exports = (root, context, info) => \n                    context.accounts.Query.user({ root, args: { id: root.id }, context, info })\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"You can check out our example that uses Federation as a merging strategy.")),(0,a.kt)("iframe",{src:"https://codesandbox.io/embed/github/Urigo/graphql-mesh/tree/master/examples/federation-example?fontsize=14&hidenavigation=1&theme=dark&module=%2F.meshrc.yml",style:{width:"100%",height:"500px",border:"0",borderRadius:"4px",overflow:"hidden"},title:"federation-example",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}),(0,a.kt)("p",null,(0,a.kt)("ul",{parentName:"p"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"types")," (type: ",(0,a.kt)("inlineCode",{parentName:"li"},"Array of Object"),", required): ",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"name")," (type: ",(0,a.kt)("inlineCode",{parentName:"li"},"String"),", required)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"config")," (type: ",(0,a.kt)("inlineCode",{parentName:"li"},"Object"),"): ",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"* `keyFields` (type: `Array of String`, required)\n* `extend` (type: `Boolean`)\n* `fields` (type: `Array of Object`, required): \n  * `name` (type: `String`, required)\n  * `config` (type: `Object`, required): \n    * `external` (type: `Boolean`)\n    * `provides` (type: `String`)\n    * `requires` (type: `String`)\n* `resolveReference` -  One of: \n  * `String`\n  * `object`: \n    * `queryFieldName` (type: `String`, required) - Name of root field name that resolves the reference\n    * `keyArg` (type: `String`) - If the root field name has multiple args,\n")),"you need to define which argument should receive the key"))))))}p.isMDXComponent=!0}}]);