"use strict";(self.webpackChunk_graphql_mesh_website=self.webpackChunk_graphql_mesh_website||[]).push([[8267],{5318:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var r=n(7378);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=p(n),d=o,f=m["".concat(l,".").concat(d)]||m[d]||c[d]||a;return n?r.createElement(f,s(s({ref:t},u),{},{components:n})):r.createElement(f,s({ref:t},u))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8533:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},metadata:function(){return l},toc:function(){return p},default:function(){return c}});var r=n(5773),o=n(808),a=(n(7378),n(5318)),s=["components"],i={id:"snapshot",title:"Snapshot Transform",sidebar_label:"Snapshot"},l={unversionedId:"transforms/snapshot",id:"transforms/snapshot",isDocsHomePage:!1,title:"Snapshot Transform",description:"The snapshot transform allow you to apply snapshot for development usage.",source:"@site/docs/transforms/snapshot.md",sourceDirName:"transforms",slug:"/transforms/snapshot",permalink:"/docs/transforms/snapshot",editUrl:"https://github.com/urigo/graphql-mesh/edit/master/website/docs/transforms/snapshot.md",version:"current",sidebar_label:"Snapshot",frontMatter:{id:"snapshot",title:"Snapshot Transform",sidebar_label:"Snapshot"},sidebar:"sidebar",previous:{title:"Cache Transform",permalink:"/docs/transforms/cache"},next:{title:"Mock Transform",permalink:"/docs/transforms/mock"}},p=[{value:"How to use?",id:"how-to-use",children:[]},{value:"Codesandbox Example",id:"codesandbox-example",children:[]},{value:"Config API Reference",id:"config-api-reference",children:[]}],u={toc:p};function c(e){var t=e.components,n=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"snapshot")," transform allow you to apply snapshot for development usage."),(0,a.kt)("p",null,"The snapshot transform writes the responses of your remote data source to your file-system and then uses it instead of re-fetching it every time. It's alse useful because you can easily manipulate your data manually, and see how your API mesh responds to it."),(0,a.kt)("p",null,"To get started with this transform, install it from npm:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"yarn add @graphql-mesh/transform-snapshot\n")),(0,a.kt)("h2",{id:"how-to-use"},"How to use?"),(0,a.kt)("p",null,"Add the following configuration to your Mesh config file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},"transforms:\n  - snapshot:\n      if: \"process.env.NODE_ENV != 'production'\"\n      apply: \n        - Query.*\n      outputDir: __snapshots__\n")),(0,a.kt)("p",null,"The following snapshot will work if you are in development environment (see the ",(0,a.kt)("inlineCode",{parentName:"p"},"if")," command)."),(0,a.kt)("p",null,"To modify your snapshots and change the responses, go to ",(0,a.kt)("inlineCode",{parentName:"p"},"__snapshots__")," and modify the responses under those files. "),(0,a.kt)("h2",{id:"codesandbox-example"},"Codesandbox Example"),(0,a.kt)("p",null,"You can check out our example that uses SOAP Handler with snapshot transform."),(0,a.kt)("iframe",{src:"https://codesandbox.io/embed/github/Urigo/graphql-mesh/tree/master/examples/soap-country-info?fontsize=14&hidenavigation=1&theme=dark&module=%2F.meshrc.yml",style:{width:"100%",height:"500px",border:"0",borderRadius:"4px",overflow:"hidden"},title:"country-info-example",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}),(0,a.kt)("h2",{id:"config-api-reference"},"Config API Reference"),(0,a.kt)("p",null,(0,a.kt)("ul",{parentName:"p"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"if")," -  - Expression for when to activate this extension.\nValue can be a valid JS expression string or a boolean One of: ",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"String")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Boolean")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"apply")," (type: ",(0,a.kt)("inlineCode",{parentName:"li"},"Array of String"),", required) - Resolver to be applied\nFor example;\napply:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"  - Query.* <- * will apply this extension to all fields of Query type\n  - Mutation.someMutationButProbablyYouWontNeedIt\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"outputDir")," (type: ",(0,a.kt)("inlineCode",{parentName:"li"},"String"),", required) - Path to the directory of the generated snapshot files"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"respectSelectionSet")," (type: ",(0,a.kt)("inlineCode",{parentName:"li"},"Boolean"),") - Take snapshots by respecting the requested selection set.\nThis might be needed for the handlers like Postgraphile or OData that rely on the incoming GraphQL operation."))))}c.isMDXComponent=!0}}]);