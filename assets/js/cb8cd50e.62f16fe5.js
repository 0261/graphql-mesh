(self.webpackChunk_graphql_mesh_website=self.webpackChunk_graphql_mesh_website||[]).push([[5347],{5318:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),l=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=l(n),m=a,d=h["".concat(p,".").concat(m)]||h[m]||u[m]||i;return n?r.createElement(d,o(o({ref:t},c),{},{components:n})):r.createElement(d,o({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},914:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return p},toc:function(){return l},default:function(){return u}});var r=n(9603),a=n(120),i=(n(7378),n(5318)),o=["components"],s={id:"basic-example",title:"Basic Usage",sidebar_label:"3. Basic Usage"},p={unversionedId:"getting-started/basic-example",id:"getting-started/basic-example",isDocsHomePage:!1,title:"Basic Usage",description:"To get started with a simple Mesh, create a GraphQL Mesh configuration file - .meshrc.yaml, under your project root, and fill in your sources, for example:",source:"@site/docs/getting-started/basic-example.md",sourceDirName:"getting-started",slug:"/getting-started/basic-example",permalink:"/docs/getting-started/basic-example",editUrl:"https://github.com/urigo/graphql-mesh/edit/master/website/docs/getting-started/basic-example.md",version:"current",sidebar_label:"3. Basic Usage",frontMatter:{id:"basic-example",title:"Basic Usage",sidebar_label:"3. Basic Usage"},sidebar:"sidebar",previous:{title:"Installation",permalink:"/docs/getting-started/installation"},next:{title:"Mesh Transforms",permalink:"/docs/getting-started/mesh-transforms"}},l=[{value:"Try your new API",id:"try-your-new-api",children:[]},{value:"Consuming Mesh Schema in code",id:"consuming-mesh-schema-in-code",children:[]},{value:"Introspecting your Mesh / Exporting your Schema",id:"introspecting-your-mesh--exporting-your-schema",children:[]}],c={toc:l};function u(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"To get started with a simple Mesh, create a GraphQL Mesh configuration file - ",(0,i.kt)("inlineCode",{parentName:"p"},".meshrc.yaml"),", under your project root, and fill in your sources, for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"sources:\n  - name: Wiki\n    handler:\n      openapi:\n        source: https://api.apis.guru/v2/specs/wikimedia.org/1.0.0/swagger.yaml\n")),(0,i.kt)("p",null,"This demo will use the public API of Wikipedia, which uses ",(0,i.kt)("inlineCode",{parentName:"p"},"openapi")," spec, so we'll need to make sure we have ",(0,i.kt)("inlineCode",{parentName:"p"},"@graphql-mesh/openapi")," handler installed as well:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"yarn add graphql @graphql-mesh/openapi\n")),(0,i.kt)("h3",{id:"try-your-new-api"},"Try your new API"),(0,i.kt)("p",null,"GraphQL Mesh comes with a built in GraphiQL interface, so it means that you can try your newly-created GraphQL before writing any line of code. All you need to get started is the configuration file."),(0,i.kt)("p",null,"To test your new GraphQL API based on your API specs, you can run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"yarn graphql-mesh serve\n")),(0,i.kt)("p",null,"This will serve a GraphiQL interface with your schema, so you'll be able to test it right away, before intergrating it to your application, you can try to run a test query."),(0,i.kt)("p",null,"Open your browser in ",(0,i.kt)("inlineCode",{parentName:"p"},"http://localhost:4000")," to start using it."),(0,i.kt)("p",null,"For example, this following will fetch all page views for Wikipedia.org on the past month:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'query wikipediaMetrics {\n  getMetricsPageviewsAggregateProjectAccessAgentGranularityStartEnd(\n    access: ALL_ACCESS\n    agent: USER\n    start: "20200101"\n    end: "20200226"\n    project: "en.wikipedia.org"\n    granularity: DAILY\n  ) {\n    items {\n      views\n    }\n  }\n}\n')),(0,i.kt)("p",null,"You can give it a try and run it directly in your browser."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"You can find the complete example ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Urigo/graphql-mesh/tree/master/examples/openapi-javascript-wiki"},"here"))),(0,i.kt)("h3",{id:"consuming-mesh-schema-in-code"},"Consuming Mesh Schema in code"),(0,i.kt)("p",null,"After you have tested your new API, you can use it directly in your app in order to fetch data."),(0,i.kt)("p",null,"You can use the Mesh ",(0,i.kt)("inlineCode",{parentName:"p"},"GraphQLSchema")," instance to query your data from your application code by using ",(0,i.kt)("inlineCode",{parentName:"p"},"getMesh")," with your configuration object."),(0,i.kt)("p",null,"Start by load and parsing your configuration file, and pass it to ",(0,i.kt)("inlineCode",{parentName:"p"},"getMesh"),", this will return for your a modified version of GraphQL's ",(0,i.kt)("inlineCode",{parentName:"p"},"execute"),", so you can use it directly to fetch your data:"),(0,i.kt)("p",null,"You need to install ",(0,i.kt)("inlineCode",{parentName:"p"},"@graphql-mesh/runtime")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"@graphql-mesh/config")," to access GraphQL Mesh Schema inside your code."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"yarn add @graphql-mesh/runtime\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const { findAndParseConfig } = require(\'@graphql-mesh/config\');\nconst { getMesh } = require(\'@graphql-mesh/runtime\');\n\nasync function test() {\n  // This will load the config file from the default location (process.cwd)\n  const meshConfig = await findAndParseConfig();\n  const { execute } = await getMesh(meshConfig);\n\n  // Use `execute` to run a query directly and fetch data from your APIs\n  const { data, errors } = await execute(/* GraphQL */ `\n    query wikipediaMetrics {\n      getMetricsPageviewsAggregateProjectAccessAgentGranularityStartEnd(\n        access: ALL_ACCESS\n        agent: USER\n        start: "20200101"\n        end: "20200226"\n        project: "en.wikipedia.org"\n        granularity: MONTHLY\n      ) {\n        items {\n          views\n        }\n      }\n    }\n  `);\n}\n')),(0,i.kt)("h3",{id:"introspecting-your-mesh--exporting-your-schema"},"Introspecting your Mesh / Exporting your Schema"),(0,i.kt)("p",null,"Since GraphQL-Mesh schema is created during runtime (based on your external API sources), it's not possible to access it without serving it."),(0,i.kt)("p",null,"If you need to get the GraphQL schema SDL or GraphQL schema introspection, you can use the following command to generate a static file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"yarn graphql-mesh dump-schema --output ./schema.graphql\n")),(0,i.kt)("p",null,"Or, for introspection JSON:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"yarn graphql-mesh dump-schema --output ./schema.json\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"dump-schema")," command uses an implicit switch based on the target file extension ",(0,i.kt)("inlineCode",{parentName:"p"},".graphql")," or ",(0,i.kt)("inlineCode",{parentName:"p"},".json")," to produce different output files. Make sure you select the correct one for your purposes. The ",(0,i.kt)("inlineCode",{parentName:"p"},".graphql")," extension causes the output to be in GraphQL SDL (Schema Definition Language) format."),(0,i.kt)("p",null,"This is useful if you need to feed other tools (like ",(0,i.kt)("a",{parentName:"p",href:"https://graphql-code-generator.com/"},"graphql-codegen"),", ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/dotansimha/graphql-eslint"},"graphql-eslint"),", ",(0,i.kt)("a",{parentName:"p",href:"https://graphql-inspector.com/"},"graphql-inspector")," and more) with the static GraphQL schema."))}u.isMDXComponent=!0}}]);