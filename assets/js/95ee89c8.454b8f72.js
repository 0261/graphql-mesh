(self.webpackChunk_graphql_mesh_website=self.webpackChunk_graphql_mesh_website||[]).push([[3618],{5318:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return u}});var r=n(7378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=s(n),u=a,f=c["".concat(p,".").concat(u)]||c[u]||m[u]||i;return n?r.createElement(f,o(o({ref:t},d),{},{components:n})):r.createElement(f,o({ref:t},d))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4200:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return l},toc:function(){return p},default:function(){return d}});var r=n(9603),a=n(120),i=(n(7378),n(5318)),o={id:"federation",title:"Apollo Federation Transform",sidebar_label:"Apollo Federation"},l={unversionedId:"transforms/federation",id:"transforms/federation",isDocsHomePage:!1,title:"Apollo Federation Transform",description:"federation transform allows to add the resolvers and directives to conform to the federation specification. Much of the federation sourcecode could be reused ensuring it is compliant to the specification. This transform uses graphql-transform-federation package.",source:"@site/docs/transforms/federation.md",sourceDirName:"transforms",slug:"/transforms/federation",permalink:"/docs/transforms/federation",editUrl:"https://github.com/urigo/graphql-mesh/edit/master/website/docs/transforms/federation.md",version:"current",sidebar_label:"Apollo Federation",frontMatter:{id:"federation",title:"Apollo Federation Transform",sidebar_label:"Apollo Federation"},sidebar:"sidebar",previous:{title:"Resolvers Composition Transform",permalink:"/docs/transforms/resolvers-composition"},next:{title:"Filter Schema Transform",permalink:"/docs/transforms/filter-schema"}},p=[{value:"How to use?",id:"how-to-use",children:[{value:"Add Reference Resolver as a Code File",id:"add-reference-resolver-as-a-code-file",children:[]}]}],s={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"federation")," transform allows to add the resolvers and directives to conform to the federation specification. Much of the federation sourcecode could be reused ensuring it is compliant to the specification. This transform uses ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/0xR/graphql-transform-federation"},(0,i.kt)("inlineCode",{parentName:"a"},"graphql-transform-federation"))," package."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"yarn add @graphql-mesh/transform-federation\n")),(0,i.kt)("h2",{id:"how-to-use"},"How to use?"),(0,i.kt)("p",null,"Add the following configuration to your Mesh config file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},'transforms:\n  - federation: \n        types:\n            # Ensure the root queries of this schema show up the combined schema\n            - name: Query\n              config:\n                extend: true\n            - name: Product\n              config:\n                # extend Product {\n                extend: true\n                # Product @key(fields: "id") {\n                keyFields:\n                    - id\n                fields:\n                    # id: Int! @external\n                    - name: id\n                      external: true\n                resolveReference:\n                  targetSource: accounts\n                  targetMethod: user\n                  args:\n                    id: root.id\n\n')),(0,i.kt)("h3",{id:"add-reference-resolver-as-a-code-file"},"Add Reference Resolver as a Code File"),(0,i.kt)("p",null,"If you want to add more complex business logic, you can point to a code file that exports a resolver function."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"resolveReference: ./userResolveReference.js\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"./userResolveReference.js")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// So we can point to an existing query field to resolve that entity\nmodule.exports = (root, context) => context.accounts.api.user({ id: root.id })\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"You can check out our example that uses Federation as a merging strategy.")),(0,i.kt)("iframe",{src:"https://codesandbox.io/embed/github/Urigo/graphql-mesh/tree/master/examples/federation-example?fontsize=14&hidenavigation=1&theme=dark&module=%2F.meshrc.yml",style:{width:"100%",height:"500px",border:"0",borderRadius:"4px",overflow:"hidden"},title:"federation-example",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}),(0,i.kt)("p",null,(0,i.kt)("ul",{parentName:"p"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"types")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"Array of Object"),", required): ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"String"),", required)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"config")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"Object"),"): ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"keyFields")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"Array of String"),", required)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"extend")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"Boolean"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"fields")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"Array of Object"),", required): ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"String"),", required)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"config")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"Object"),", required): ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"external")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"Boolean"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"provides")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"String"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"required")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"String"),")"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"resolveReference")," -  One of: ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"String")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"object"),": ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"targetSource")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"String"),", required)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"targetMethod")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"String"),", required)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"args")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"JSON"),", required)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"returnData")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"String"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"resultSelectedFields")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"JSON"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"resultSelectionSet")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"String"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"resultDepth")," (type: ",(0,i.kt)("inlineCode",{parentName:"li"},"Int"),")"))))))))))))}d.isMDXComponent=!0}}]);